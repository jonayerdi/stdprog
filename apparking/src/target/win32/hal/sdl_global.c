/*************************************************************************************//**
* @file sdl_global.c
* @brief Centralized initialization of the SDL library
* @author Jon Ayerdi
*****************************************************************************************/

/*--------------------------------------------------------------------------------------*/
/*                                       INCLUDES                                       */
/*--------------------------------------------------------------------------------------*/

#include "hal/sdl_global.h"

#include <stdlib.h> /* atexit */

#include "SDL.h"

/*--------------------------------------------------------------------------------------*/
/*                                   PRIVATE VARIABLES                                  */
/*--------------------------------------------------------------------------------------*/

static char _using_sdl = 0;

/*--------------------------------------------------------------------------------------*/
/*                             PUBLIC FUNCTION DEFINITIONS                              */
/*--------------------------------------------------------------------------------------*/

int sdl_init_if_needed(void)
{
    if(!_using_sdl)
    {
        if(SDL_Init(SDL_INIT_TIMER | SDL_INIT_VIDEO | SDL_INIT_EVENTS) < 0)
        {
            return (int)SDL_GetError();
        }
        _using_sdl = 1;
        atexit(SDL_Quit);
    }
    return 0;
}

/*****************************************************************************************
*                                      sdl_global.c
*****************************************************************************************/
